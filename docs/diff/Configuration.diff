--- docs/architecture/Configuration.md	2026-02-15 08:50:46
+++ plugin/skills/swift-architecture/configuration.md	2026-02-15 11:35:21
@@ -1,40 +1,41 @@
-# Configuration Architecture
+# Configuration & Data Path Setup
 
-Applications benefit from centralized configuration and data path management. Configuration services live in the **Services layer** as shared utilities, and are initialized at the **Apps layer** and passed into models and use cases.
+Configuration services live in the **Services layer** and are initialized at the **Apps layer**. They provide centralized credential management and type-safe file path resolution.
 
-## ConfigurationService
+## Two Services
 
-**Purpose**: Manages credentials and settings via JSON files
+| Service | Purpose | Location |
+|---------|---------|----------|
+| `ConfigurationService` | Credentials & settings via JSON files | `~/.myapp/*.json` |
+| `DataPathsService` | Type-safe file system paths for data storage | `~/.myapp/data/` |
 
-**Location**: `~/.myapp/*.json` (or `~/Library/Application Support/MyApp/`)
+## ConfigurationService
 
-**Layer**: Services — shared configuration utility used across features
+Loads typed configuration from JSON files in the app's config directory.
 
-**Usage**:
 ```swift
 let configService = try ConfigurationService()
 let config = try configService.get(APIConfiguration.self, from: "api-service")
 ```
 
-**Configuration Files**:
-- `api-service.json` - API service credentials
-- `build-server.json` - Build server credentials
-- `ai-service.json` - AI provider API key (optional)
-- `issue-tracker.json` - Issue tracker credentials (optional)
-- `analytics.json` - Analytics service credentials (optional)
-
 ### Configuration File Reference
 
-All configuration files should be placed in the app's config directory and use JSON format.
+| File | Fields | Required |
+|------|--------|----------|
+| `api-service.json` | `token` | Yes |
+| `build-server.json` | `userName`, `password`, `baseURL` | Yes |
+| `issue-tracker.json` | `baseURL`, `username`, `apiToken` | Yes |
+| `analytics.json` | `username`, `password`, `baseURL` | Yes |
+| `ai-service.json` | `apiKey` | No (optional) |
 
-#### api-service.json
+**Example** — `api-service.json`:
 ```json
 {
   "token": "your-api-token"
 }
 ```
 
-#### build-server.json
+**Example** — `build-server.json`:
 ```json
 {
   "userName": "your-username",
@@ -43,9 +44,7 @@
 }
 ```
 
-**Note**: All fields including `baseURL` are required.
-
-#### issue-tracker.json
+**Example** — `issue-tracker.json`:
 ```json
 {
   "baseURL": "https://your-company.atlassian.net",
@@ -54,7 +53,7 @@
 }
 ```
 
-#### analytics.json
+**Example** — `analytics.json`:
 ```json
 {
   "username": "analytics-user",
@@ -63,30 +62,40 @@
 }
 ```
 
-#### ai-service.json (optional)
+**Example** — `ai-service.json` (optional):
 ```json
 {
   "apiKey": "your-ai-service-api-key"
 }
 ```
 
----
+**Note**: All fields including `baseURL` are required for services that declare it. Configuration directory is typically `~/.myapp/` or `~/Library/Application Support/MyApp/`.
 
 ## DataPathsService
 
-**Purpose**: Manages file system paths where features and services store data
+Provides type-safe enum-based paths for data storage directories.
 
-**Location**: `~/.myapp/data/`
+```swift
+let dataPathsService = try DataPathsService()
+let path = try dataPathsService.path(for: .builds)
+```
 
-**Layer**: Services — shared data path utility
+### ServicePath Enum
 
-**Usage**:
 ```swift
-let dataPathsService = try DataPathsService()
-let path = try dataPathsService.path(for: .builds)  // Type-safe enum
+public enum ServicePath {
+    case builds             // ~/.myapp/data/api-service/builds/
+    case apiArtifacts       // ~/.myapp/data/api-service/artifacts/
+    case buildArtifacts     // ~/.myapp/data/build-server/artifacts/
+    case analyticsReports   // ~/.myapp/data/analytics/reports/
+    case analyticsProcessed // ~/.myapp/data/analytics/processed/
+    case taskJobs           // ~/.myapp/data/tasks/jobs/
+    case appDatabase        // ~/.myapp/data/app/database/
+}
 ```
 
-**Directory Structure**:
+### Directory Structure
+
 ```
 ~/.myapp/data/
 ├── api-service/
@@ -103,23 +112,8 @@
     └── database/          (SwiftData store)
 ```
 
-**ServicePath Enum** (Type-safe paths):
-```swift
-public enum ServicePath {
-    case builds             // ~/.myapp/data/api-service/builds/
-    case apiArtifacts       // ~/.myapp/data/api-service/artifacts/
-    case buildArtifacts     // ~/.myapp/data/build-server/artifacts/
-    case analyticsReports   // ~/.myapp/data/analytics/reports/
-    case analyticsProcessed
-    case taskJobs           // ~/.myapp/data/tasks/jobs/
-    case appDatabase        // ~/.myapp/data/app/database/
-}
-```
+## Integration Patterns
 
----
-
-## Integration with the Architecture
-
 ### Loading at the Apps Layer
 
 Configuration services are created at the Apps layer and injected into models and use cases:
@@ -149,7 +143,7 @@
 
 ### Passing to Use Cases
 
-Use cases receive configuration through their initializer — they don't load configuration themselves:
+Use cases receive configuration through their initializer — they never load configuration themselves:
 
 ```swift
 public struct ImportUseCase: StreamingUseCase {
@@ -163,9 +157,9 @@
 }
 ```
 
-### Optional Child Models for Configuration
+### Optional Child Models for Feature-Specific Config
 
-For features that require credentials, use optional child models (see [swift-ui.md](swift-ui.md)):
+For features that require credentials, use optional child models. The model is `nil` when config is missing:
 
 ```swift
 @MainActor @Observable
@@ -203,13 +197,23 @@
 }
 ```
 
----
-
 ## Design Principles
 
-1. **Single Source of Truth**: One service per concern (config vs data paths)
-2. **Fail Fast**: Missing configuration crashes at startup with clear errors
-3. **Type-Safe**: Strongly-typed configuration and enum-based paths
-4. **No Arguments**: Both services use hardcoded root paths
-5. **Auto-Creation**: DataPathsService creates directories automatically
-6. **Apps Layer Owns Initialization**: Configuration services are created at the app layer and injected downward
+1. **Single Source of Truth** — One service per concern (config vs data paths)
+2. **Fail Fast** — Missing configuration crashes at startup with clear errors
+3. **Type-Safe** — Strongly-typed configuration models and enum-based paths
+4. **No Arguments** — Both services use hardcoded root paths (no path injection)
+5. **Auto-Creation** — DataPathsService creates directories automatically
+6. **Apps Layer Owns Initialization** — Configuration services are created at the app layer and injected downward
+
+## Checklist
+
+When adding configuration to a feature:
+
+- [ ] Configuration model is a `Codable` struct matching the JSON file
+- [ ] JSON file is documented with all required fields
+- [ ] ConfigurationService loads the config at the Apps layer (not in the feature)
+- [ ] Use case receives resolved values (API client, paths), not the config service itself
+- [ ] Optional features use optional child models when config may be absent
+- [ ] Missing required config fails fast at startup
+
